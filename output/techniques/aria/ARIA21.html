<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
   <head>
      <meta charset="UTF-8" />
      <title>ARIA21: Using Aria-Invalid to Indicate An Error Field</title>
      <link rel="stylesheet" href="https://w3.org/WAI/assets/css/style.css" />
      <link rel="stylesheet" href="../base.css" />
   </head>
   <body>
      <header id="site-header" class="default-grid with-gap">
         <div class="tool-header"><span class="tool-header-name"><a href="../">WCAG 2.1: Techniques</a></span><div class="tool-header-logo"><a href="http://w3.org/"><img alt="W3C" src="https://w3.org/WAI/atag/report-tool/images/w3c.svg" width="92" height="44" /></a><a href="http://w3.org/WAI/"><img alt="Web Accessibility Initiative" src="https://w3.org//WAI/atag/report-tool/images/wai.svg" /></a></div>
         </div>
      </header>
      <main>
         <div class="default-grid leftcol">
            <nav class="nav" aria-label="Meta navigation">
               <ul>
                  <li class="nav__item"><a href="#">About Techniques</a></li>
                  <li class="nav__item"><a href="/techniques/#techniques">All Techniques</a></li>
                  <li class="nav__item"><a href="alt-index.html">All WCAG 2 Guidance 
                        									
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="24" width="24">
                           <path fill-rule="evenodd" clip-rule="evenodd" d="M14 5C13.4477 5 13 4.55228 13 4C13 3.44772 13.4477 3 14 3H20C20.2652 3 20.5196 3.10536 20.7071 3.29289C20.8946 3.48043 21 3.73478 21 4L21 10C21 10.5523 20.5523 11 20 11C19.4477 11 19 10.5523 19 10L19 6.41422L9.70711 15.7071C9.31658 16.0976 8.68342 16.0976 8.29289 15.7071C7.90237 15.3166 7.90237 14.6834 8.29289 14.2929L17.5858 5H14ZM3 7C3 5.89543 3.89543 5 5 5H10C10.5523 5 11 5.44772 11 6C11 6.55228 10.5523 7 10 7H5V19H17V14C17 13.4477 17.4477 13 18 13C18.5523 13 19 13.4477 19 14V19C19 20.1046 18.1046 21 17 21H5C3.89543 21 3 20.1046 3 19V7Z" fill="#282828"></path>
                        </svg></a><div id="explain-supporting-documents" hidden="">
                        <p>WCAG comes with a number of supporting documents, like Techniques and Understanding
                           documents.
                        </p>
                        <p>See also: <a href="https://www.w3.org/WAI/standards-guidelines/wcag/#whatis2">What is in the WCAG 2 Documents</a></p>
                     </div>
                  </li>
               </ul>
            </nav>
            <section class="main-content">
               <h1><span>Technique ARIA21:</span>Using Aria-Invalid to Indicate An Error Field
               </h1>
               <aside class="box">
                  <header class="box-h  box-h-icon">
                     					About this Technique
                     				
                  </header>
                  <div class="box-i">
                     <p>HTML with <a href="https://www.w3.org/TR/wai-aria/">Accessible Rich Internet Applications</a>.
                     </p>
                     <p>This technique relates to <span>Sufficient to meet: <a href="/understanding/error-identification">3.3.1: Error Identification</a></span>.
                     </p>
                  </div>
               </aside>
               <section id="description">
                  <h2>Description</h2>
                  <p>This technique demonstrates how <code class="att">aria-invalid</code> may be employed to specifically identify fields that have failed validation. Its
                     use is most suitable when:
                  </p>
                  <ul>
                     
                     <li>The error description does not programmatically identify the failed fields</li>
                     
                     <li>The failed fields are identified in a manner that is not available to some users -
                        for example by using an error-icon rendered visually by some technique that does not
                        rely on color such as a visual cue like a border.
                     </li>
                     
                  </ul>
                  <div class="note">
                     <div role="heading" class="note-title marker" aria-level="3">Note</div>
                     <div>
                        <p>One of the above two situations may be true for a field which has programmatically
                           associated label and / or instructions that conveys data format, a data range, or
                           the <code class="prop">required</code> property.
                        </p>
                     </div>
                  </div>
                  <p>While it is always preferable to programmatically associate specific error description
                     with the failed field, the page's design or the framework employed may sometimes constrain
                     the author's ability to do so. In these cases, authors may programmatically set <code class="att">aria-invalid</code> to "true" on the fields that have failed validation. This is interpretable mainly
                     by assistive technologies (like screen readers / screen magnifiers) employed by users
                     who are vision impaired. When a field has <code class="att">aria-invalid</code> set to “true”, VoiceOver in Safari announces “invalid data” when the field gets focus;
                     JAWS and NVDA notify the error as an “invalid entry”.
                  </p>
                  <p>This ARIA attribute has to be set / turned on programmatically. It should not be set
                     to “true” before input validation is performed or the form is submitted. Setting <code class="att">aria-invalid</code> to “false” is the same as not placing the attribute for the form control at all.
                     Quite understandably, nothing is conveyed by assistive technology to users in this
                     case.
                  </p>
                  <p>When visible text is used to programmatically identify a failed field and / or convey
                     how the error can be corrected, setting <code class="att">aria-invalid</code> to "true" is not required from a strict compliance standpoint but may still provide
                     helpful information for users.
                  </p>
               </section>
               <section id="examples">
                  <h2>Examples</h2>
                  <section class="example" id="example-1-using-aria-invalid-on-required-fields">
                     <h3>Example 1: Using aria-invalid on required fields</h3>
                     <p>The <code class="att">aria-invalid</code> attribute is used on required fields that have no input. A message above the form
                        conveys that form submission has failed due to this.
                     </p>
                     <p>A portion of the jQuery code and the HTML form markup follow:</p><pre xml:space="preserve">
&lt;code&gt;
&lt;script&gt;
...
...
		if ($('#first').val() === '') {
			$('#first').attr("aria-invalid", "true");
$("label[for='first']").addClass('failed');
		}
		if ($('#last').val() === '') {
			$('#last').attr("aria-invalid", "true");
$("label[for='last']").addClass('failed');
		} 
		if ($('#email').val() === '') {
			$('#email').attr("aria-invalid", "true");
$("label[for='email']").addClass('failed');
		} 
...
...
&lt;/script&gt;
&lt;style type="text/css"&gt;
label.failed {
	border: red thin solid;
}
&lt;/style&gt;
&lt;form name="signup" id="signup" method="post" action="#"&gt;
 &lt;p&gt;
    &lt;label for="first"&gt;First Name (required)&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="first" id="first"&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;label for="last"&gt;Last Name (required)&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="last" id="last"&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;label for="email"&gt;Email (required)&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="email" id="email"&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;input type="submit" name="button" id="button" value="Submit"&gt;
  &lt;/p&gt;
&lt;/form&gt;
&lt;/code&gt;            </pre><p class="working-example"><a href="../../working-examples/aria-invalid-required-fields/">Working example: Using aria-invalid on required fields</a>.
                     </p>
                  </section>
                  <section class="example" id="example-2-identifying-errors-in-data-format">
                     <h3>Example 2: Identifying errors in data format</h3>
                     <p><code class="att">Aria-invalid</code> and <code class="att">aria-describedby</code> are used together to indicate an error when the personal identification number (PIN),
                        email address, or start date are not in the expected format. The error message is
                        associated with the field using <code class="att">aria-describedby</code>, and <code class="att">aria-invalid</code> makes it easier to programmatically find fields with errors.
                     </p>
                     <p>Below is the rendered HTML code for the email address field in Example 1: When an
                        invalid email address is entered by the user such as "samexample.com" (instead of
                        sam@example.com), the HTML code is:
                     </p><pre xml:space="preserve">
&lt;div class="control"&gt;
&lt;p&gt;&lt;label for="email"&gt;Email address: [*]&lt;/label&gt; 
&lt;input type="text" name="email" id="email" class="error" aria-invalid="true" aria-describedBy="err_1" /&gt;&lt;/p&gt; 
&lt;span class="errtext" id="err_1"&gt;Error: Incorrect data&lt;/span&gt;&lt;/div&gt;
            </pre><p>And when no data is entered in the email field, the HTML code is:</p><pre xml:space="preserve">
&lt;div class="control"&gt;
&lt;p&gt;&lt;label for="email"&gt;Email address: [*]&lt;/label&gt; 
&lt;input type="text" name="email" id="email" class="error" aria-invalid="true" aria-describedBy="err_2" /&gt;&lt;/p&gt;
&lt;span class="errtext" id="err_2"&gt;
 Error: Input data missing&lt;/span&gt;
&lt;/div&gt;            </pre><p>jQuery code: jQuery is used to add aria-invalid or aria-describedby attributes as
                        well as the class attribute and append the error text. This is the code that inserts
                        aria-invalid and class="error" but does not associate the error text "incorrect data"
                        with the control programmatically:
                     </p><pre xml:space="preserve">
$(errFld).attr("aria-invalid", "true").attr("class", "error");
// Suffix error text: 
$(errFld).parent().append('&lt;span class="errtext"&gt;Error: Incorrect data&lt;/span&gt;');
            </pre><p>CSS Code:</p><pre xml:space="preserve">
input.error {
   border: red thin solid;}
span.errtext {
	margin-bottom: 1em; 	padding: .25em 1.4em .25em .25em;
	border: red thin solid; 	background-color: #EEEEFF;
	background-image:url('images/iconError.gif');
	background-repeat:no-repeat; 	background-position:right;	
}
            </pre><p class="working-example"><a href="../../working-examples/aria-invalid-data-format/">Working example: Identifying errors in data format</a>.
                     </p>
                  </section>
               </section>
               <section id="resources">
                  <h2>Resources</h2>
                  <p>Resources are for information purposes only, no endorsement implied.</p>
                  <ul>
                     
                     <li>
                        <a href="https://www.w3.org/TR/wai-aria-1.1/#states_and_properties">Supported States and Properties: WAI-ARIA 1.1</a>
                        
                     </li>
                     
                     <li>
                        	<a href="http://www.deque.com/blog/aria-invalid-error-indication/">Using Aria-invalid for Error Indication</a>
                        
                     </li>
                     
                  </ul>
               </section>
               <section id="tests">
                  <h2>Tests</h2>
                  <section class="procedure" id="procedure">
                     <h3>Procedure</h3>
                     
                     <p>For each form control that relies on <code class="att">aria-invalid</code> to convey a validation failure:
                     </p>
                     
                     <ol>
                        
                        <li>Check that <code class="att">aria-invalid</code> is not set to true when a validation failure does not exist.
                        </li>
                        
                        <li>Check that <code class="att">aria-invalid</code> is set to true when a validation failure does exist.
                        </li>
                        
                        <li>Check that the programmatically associated labels / programmatically associated instructional
                           text for the field provide enough information to understand the error.
                        </li>
                        
                     </ol>
                     
                  </section>
                  <section class="results" id="expected-results">
                     <h3>Expected Results</h3>
                     
                     <ul>
                        
                        <li>Checks #1-3 are true.</li>
                        
                     </ul>
                     
                  </section>
               </section>
            </section>
            <aside class="your-report your-report--expanded sidebar" tabindex="-1">
               <h2 style="margin-top: 0">About this page</h2>
               <p><em>Techniques</em> are examples of ways to meet a WCAG success criterion. They are <a href="javascript:alert('placeholder; link to About Techniques')">not required to meet WCAG</a>.
               </p>
               <h3>Other sources</h3>
               <p style="margin-top: -.5em; margin-bottom: 1.5em;"><em><small>No endorsement implied.</small></em></p>
               <ul>
                  <li>HTML 4.01 <a href="https://www.w3.org/TR/html4/struct/lists.html#h-10.2">Unordered lists (UL), ordered lists (OL), and list items (LI)</a></li>
                  <li>HTML 4.01 <a href="https://www.w3.org/TR/html4/struct/lists.html#h-10.3">Definition lists: the DL, DT, and DD elements</a></li>
               </ul>
            </aside>
         </div>
      </main>
      <link rel="stylesheet" href="../a11y-light.css" /><script src="../highlight.min.js"></script><script>hljs.highlightAll();</script></body>
</html>